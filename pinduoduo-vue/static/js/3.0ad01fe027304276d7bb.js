webpackJsonp([3],{E5w9:function(t,e){},EECh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("Fqso");var o=i("W8Ce"),s=(i("o4iB"),i("lA3Y")),a=i("4YfN"),n=i.n(a),c=i("2bvH"),r={data:function(){return{index:0,show:!1,animateShow:!1}},computed:n()({},Object(c.c)("goods",["current","cart"])),methods:n()({},Object(c.b)("goods",["addGoods"]),{collection:function(t){var e=this;this.animateShow=!0,setTimeout(function(){e.animateShow=!1,e.addGoods(t)},500)},onChange:function(t){this.index=t},onClickLeft:function(){this.$router.back()},buy:function(){this.show=!0},onDevHandle:function(){Object(s.a)("开发中...")},preview:function(){Object(o.a)({images:this.current.picurl,startPosition:this.index})}})},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goods"},[i("van-icon",{attrs:{name:"arrow-left"},on:{click:t.onClickLeft}}),t._v(" "),i("van-swipe",{on:{change:t.onChange}},[t._l(t.current.picurl,function(e,o){return i("van-swipe-item",{key:o,on:{click:t.preview}},[i("img",{attrs:{src:e,alt:""}})])}),t._v(" "),i("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v("\n      "+t._s(t.index+1)+"/"+t._s(t.current.picurl.length)+"\n    ")])],2),t._v(" "),i("section",{staticClass:"header"},[i("div",{staticClass:"price-group"},[i("p",{staticClass:"price"},[i("span",[t._v("￥")]),t._v(t._s(t.current.price)),i("span",[t._v("起")])]),t._v(" "),i("del",[t._v("￥"+t._s(t.current.normalprice))]),t._v(" "),i("p",{staticClass:"count"},[t._v("已拼"+t._s(t.current.count)+"件")]),t._v(" "),i("p",{staticClass:"desc"},[t._v("支持分期，低至114.66元/期")])]),t._v(" "),i("div",{staticClass:"title"},[i("h2",[t._v(t._s(t.current.name))]),t._v(" "),i("span",{staticClass:"tag"},[t._v("送货入户并安装")])]),t._v(" "),i("div",{staticClass:"option"},[i("div",{staticClass:"ticket"},[i("span",{staticClass:"tag"},[t._v("领券")]),t._v(" "),t._l(t.current.tickettag,function(e,o){return i("span",{key:o,staticClass:"tag-o"},[t._v(t._s(e))])})],2),t._v(" "),i("div",{staticClass:"service"},t._l(t.current.servicetag,function(e,o){return i("span",{key:o},[t._v(t._s(e))])}),0)])]),t._v(" "),i("div",{staticClass:"goods-bottom-bar"},[i("van-goods-action",[i("van-goods-action-icon",{attrs:{to:"/home",icon:"wap-home",text:"主页"}}),t._v(" "),i("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服"},on:{click:t.onDevHandle}}),t._v(" "),i("van-goods-action-icon",{attrs:{to:"/cart",icon:"cart-o",text:"购物车",info:t.cart.length||0}}),t._v(" "),i("van-goods-action-button",{attrs:{type:"warning",text:"加入购物车"},on:{click:function(e){return t.collection(t.current)}}}),t._v(" "),i("van-goods-action-button",{attrs:{type:"danger",disabled:"",text:"立即购买"}})],1)],1),t._v(" "),i("van-popup",{staticClass:"order",style:{height:"70%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("div",{staticClass:"title"},[i("img",{attrs:{src:"http://temp.im/150x150",alt:""}}),t._v(" "),i("div",{staticClass:"cont"},[i("p",{staticClass:"price"},[t._v("2660")]),t._v(" "),i("p",{staticClass:"desc"},[t._v("已选：{{}}")])])]),t._v(" "),i("p",{staticClass:"btn"},[t._v("确定")])]),t._v(" "),i("transition",{attrs:{name:"animate"}},[t.animateShow?i("div",{staticClass:"animate"}):t._e()])],1)},staticRenderFns:[]};var h=i("C7Lr")(r,l,!1,function(t){i("bXd0")},"data-v-039a6524",null);e.default=h.exports},Fqso:function(t,e,i){"use strict";var o=i("M7jv"),s=(i.n(o),i("iloK")),a=(i.n(s),i("ZbCe")),n=(i.n(a),i("JVYo")),c=(i.n(n),i("E5w9"));i.n(c)},W8Ce:function(t,e,i){"use strict";var o=i("kRwM"),s=i("xd7I"),a=i("j6cy"),n=i.n(a),c=i("CiZB"),r=i("Ee5/"),l=i("69Gg"),h=i("HyUM"),u=i("kVKy"),v=i("jdKG"),d=s.a.extend({mixins:[Object(v.a)(function(t,e){this.handlePopstate(e&&this.closeOnPopstate)})],props:{closeOnPopstate:Boolean},data:function(){return{bindStatus:!1}},watch:{closeOnPopstate:function(t){this.handlePopstate(t)}},methods:{handlePopstate:function(t){this.$isServer||this.bindStatus!==t&&(this.bindStatus=t,(t?l.b:l.a)(window,"popstate",this.close))}}}),m=i("MLpb"),p=i("RAWL"),g=Object(c.b)("image-preview"),f=g[0],C=g[1];function _(t){return Math.sqrt(Math.abs((t[0].clientX-t[1].clientX)*(t[0].clientY-t[1].clientY)))}var w,b=f({mixins:[h.a,u.a,d],props:{className:null,lazyLoad:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},swipeDuration:{type:Number,default:500},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},startPosition:{type:Number,default:0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:C("overlay")},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return this.bindStatus=!1,{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,active:0,doubleClickTimer:null}},computed:{imageStyle:function(){var t=this.scale,e={transition:this.zooming||this.moving?"":".3s all"};return 1!==t&&(e.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),e}},watch:{value:function(){this.active=this.startPosition},startPosition:function(t){this.active=t}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){var e=this;Object(l.c)(t);var i=new Date-this.touchStartTime,o=this.$refs.swipe||{},s=o.offsetX,a=void 0===s?0:s,n=o.offsetY;i<300&&a<10&&(void 0===n?0:n)<10&&(this.doubleClickTimer?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,this.toggleScale()):this.doubleClickTimer=setTimeout(function(){var t=e.active;e.resetScale(),e.$emit("close",{index:t,url:e.images[t]}),e.asyncClose||e.$emit("input",!1),e.doubleClickTimer=null},300))},startMove:function(t){var e=t.currentTarget.getBoundingClientRect(),i=window.innerWidth,o=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(e.width-i)/2),this.maxMoveY=Math.max(0,(e.height-o)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=_(t.touches)},onImageTouchStart:function(t){var e=t.touches,i=(this.$refs.swipe||{}).offsetX,o=void 0===i?0:i;1===e.length&&1!==this.scale?this.startMove(t):2!==e.length||o||this.startZoom(t)},onImageTouchMove:function(t){var e=t.touches;if((this.moving||this.zooming)&&Object(l.c)(t,!0),this.moving){this.touchMove(t);var i=this.deltaX+this.startMoveX,o=this.deltaY+this.startMoveY;this.moveX=Object(r.a)(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(r.a)(o,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var s=_(e),a=this.startScale*s/this.startDistance;this.scale=Object(r.a)(a,this.minZoom,this.maxZoom)}},onImageTouchEnd:function(t){if(this.moving||this.zooming){var e=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),e&&Object(l.c)(t,!0)}},onSwipeChange:function(t){this.resetScale(),this.active=t,this.$emit("change",t)},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0},toggleScale:function(){var t=this.scale>1?1:2;this.scale=t,this.moveX=0,this.moveY=0}},render:function(){var t=this,e=arguments[0];if(this.value){var i=this.active,o=this.images,s=this.showIndex&&e("div",{class:C("index")},[this.slots("index")||i+1+"/"+o.length]),a=e(m.a,{ref:"swipe",attrs:{loop:this.loop,duration:this.swipeDuration,indicatorColor:"white",initialSwipe:this.startPosition,showIndicators:this.showIndicators},on:{change:this.onSwipeChange}},[o.map(function(o,s){var a={class:C("image"),style:s===i?t.imageStyle:null,on:{touchstart:t.onImageTouchStart,touchmove:t.onImageTouchMove,touchend:t.onImageTouchEnd,touchcancel:t.onImageTouchEnd}};return e(p.a,[t.lazyLoad?e("img",n()([{directives:[{name:"lazy",value:o}]},a])):e("img",n()([{attrs:{src:o}},a]))])})]);return e("transition",{attrs:{name:"van-fade"}},[e("div",{class:[C(),this.className],on:{touchstart:this.onWrapperTouchStart,touchMove:l.c,touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[a,s])])}}}),y={images:[],loop:!0,swipeDuration:500,value:!0,minZoom:1/3,maxZoom:3,className:"",onClose:null,onChange:null,lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,showIndicators:!1,closeOnPopstate:!1},x=function(t,e){if(void 0===e&&(e=0),!c.f){w||(w=new(s.a.extend(b))({el:document.createElement("div")}),document.body.appendChild(w.$el),w.$on("change",function(t){w.onChange&&w.onChange(t)}));var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(o.a)(w,y,i),w.$once("input",function(t){w.value=t}),i.onClose&&w.$once("close",i.onClose),w}};x.install=function(){s.a.use(b)};e.a=x},bXd0:function(t,e){}});
//# sourceMappingURL=3.0ad01fe027304276d7bb.js.map